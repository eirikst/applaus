<div class="container" ng-swipe-right="changeView('contests')">
    <span class="redMsg">
        {{createErrMsg}}
    </span>
    <h2 class="text-center">Idebank</h2>
    <div class="drop" ng-init="dropCreate = false">
        <div class="dropHeading">
            <a class="glyphicon" ng-class="{'glyphicon-chevron-down': dropCreate, 'glyphicon-chevron-right': !dropCreate}"></a>
            <a class="text-center" ng-click="dropCreate = !dropCreate">Ny ide
                <span class="clickableDiv"></span>
            </a>
        </div>
        <div class="innerDrop" ng-show="dropCreate">
            <form name="createIdeaForm">
                <p>
                    <input name="ideaTitle" type="text"  ng-model="idea.title" class="form-control" placeholder="Tittel" ng-class="{red:createIdeaForm.ideaTitle.$error.required && createIdeaForm.ideaTitle.$dirty, green:!createIdeaForm.ideaTitle.$error.required && createIdeaForm.ideaTitle.$dirty}" required="true">
                </p>
                <p>
                    <textarea name="ideaText" class="form-control"  ng-model="idea.text" placeholder="Tekst" ng-class="{red:createIdeaForm.ideaText.$error.required && createIdeaForm.ideaText.$dirty, green:!createIdeaForm.ideaText.$error.required && createIdeaForm.ideaText.$dirty}" required="true"></textarea>
                </p>
                <p>
                    <button class="form-control" ng-click="addIdea(idea);" ng-disabled="createIdeaForm.$invalid">Legg til</button>
                </p>
                <span class="redMsg">
                    {{createErrMsg}}
                </span>
                <span class="greenMsg">
                    {{createMsg}}
                </span>
            </form>
        </div>
    </div>

    <div class="drop" ng-init="dropBank = false" ng-repeat="idea in bank track by $index">
        <div class="dropHeading">
            <a class="glyphicon" ng-class="{'glyphicon-chevron-down': dropBank, 'glyphicon-chevron-right': !dropBank}"></a>
            <a class="text-center" ng-click="dropBank = !dropBank">{{idea.date.$date| date:('dd.MM')}} - {{idea.title}}
                <span class="clickableDiv"></span>
            </a>
        </div>
        <div class="innerDrop" ng-show="dropBank">
            <p>
                By {{idea.username| truncate:25}}, {{idea.date.$date| date:('dd.MM.yyyy HH:mm')}}
            </p>
            <p>
                {{idea.text}}
            </p>
            <div>
                <span ng-show="idea.likes == undefined || idea.likes.length == 0"><a class="glyphicon glyphicon-thumbs-up"></a> Be the first to like this idea!</span>
                <span ng-show="idea.likes != undefined && idea.likes.length == 1"><a class="glyphicon glyphicon-thumbs-up"></a> {{idea.likes[0]}} likes this</span>
                <span ng-show="idea.likes != undefined && idea.likes.length == 2"><a class="glyphicon glyphicon-thumbs-up"></a> {{idea.likes[0]}} and {{idea.likes[1]}} likes this</span>
                                <div class="dropdown">
                <span ng-show="idea.likes != undefined && idea.likes.length > 2"><a class="glyphicon glyphicon-thumbs-up"></a> {{idea.likes[0]}} and 
                    <a data-toggle="dropdown">
                        {{idea.likes.length - 1}} 
                        
                    </a>
                    <ul class="dropdown-menu">
                        <li ng-repeat="like in idea.likes | arrWithoutFirst">
                            {{like | truncate:25}}
                        </li>
                    </ul>
                others likes this
                </span>
                </div>
            </div>

            <hr>
            <strong>
                <span ng-show="idea.comments.length > 0">Comments</span>
                <span ng-show="idea.comments == undefined || idea.comments.length == 0">No comments</span>
                <a class="glyphicon glyphicon-plus glyphicon-marginleft5px" ng-click="commentable=true" ng-show="!commentable"></a>
                <a class="glyphicon glyphicon-minus glyphicon-marginleft5px" ng-click="commentable=false" ng-show="commentable"></a>
            </strong>
            <div ng-show="commentable">
                <form name="commentForm">
                    <p>
                        <textarea name="comment" class="form-control"  ng-model="commentText" placeholder="Comment" ng-class="{red:commentForm.comment.$error.required && commentForm.comment.$dirty, green:!commentForm.comment.$error.required && commentForm.comment.$dirty}" required="true"></textarea>
                    </p>
                    <p>
                        <button class="form-control" ng-click="addComment(idea, commentText);" ng-disabled="commentForm.$invalid">Add</button>
                    </p>
                </form>
            </div>
            <div ng-repeat="comment in idea.comments | reverseArr">
                <hr>
                <p>
                    By {{comment.writer | truncate:25}} {{comment.time.$date| date:('dd.MM.yyyy HH:mm')}}
                </p>
                <p>
                    {{comment.text}}
                </p>
                <div ng-init="toDelete = false">
                <a class="stdLink" type="button" ng-show="!toDelete" ng-click="toDelete = !toDelete">Slett</a>
                <a class="stdLink" type="button" ng-show="toDelete" ng-click="toDelete = !toDelete">Angre sletting</a>
                <div class="alert alert-info" ng-show="toDelete">
                    <a  ng-click="deleteIdea(idea);
                            clearMsg();" class="alert-link">Bekreft</a>
                    at du Ã¸nsker Ã¥ slette ideen
                </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <a type="button" class="form-control" ng-click="getIdeas(skip)">Last flere</a>
    <br>
</div>